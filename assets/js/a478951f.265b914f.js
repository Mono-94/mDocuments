"use strict";(self.webpackChunkmonodocs=self.webpackChunkmonodocs||[]).push([[1194],{4794:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>i,contentTitle:()=>t,default:()=>d,frontMatter:()=>c,metadata:()=>a,toc:()=>o});var r=l(4848),s=l(8453);const c={sidebar_position:2},t="Server",a={id:"mvehicle/functions/server",title:"Server",description:"Vehicles.ItemCarKeys() Server",source:"@site/docs/mvehicle/functions/server.md",sourceDirName:"mvehicle/functions",slug:"/mvehicle/functions/server",permalink:"/mDocuments/docs/mvehicle/functions/server",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/mvehicle/functions/server.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Client",permalink:"/mDocuments/docs/mvehicle/functions/client"},next:{title:"mGarage",permalink:"/mDocuments/docs/category/mgarage"}},i={},o=[];function h(e){const n={code:"code",em:"em",h1:"h1",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"server",children:"Server"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Vehicles.ItemCarKeys() Server"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"source = player source    | number"}),"\n",(0,r.jsx)(n.li,{children:"action = 'delete' or 'add' | string"}),"\n",(0,r.jsx)(n.li,{children:"plate  =  vehicle plate    | string"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"  -- with shared import\n  Vehicles.ItemCarKeys(source, action, plate)\n\n  -- or ox_inventory export \n  -- add\n  exports.ox_inventory:AddItem(source, 'carkey', 1, { plate = plate, description = plate })\n  -- delete\n  exports.ox_inventory:RemoveItem(source, 'carkey', 1, { plate = plate, description = plate })\n \n -- or \n  exports.mVehicle:ItemCarKeys(source, action, plate)\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Vehicles.CreateVehicle() Server"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"local CreateVehicleData = {\n    temporary = false, -- if vehicle temporary | date format 'YYYYMMDD HH:MM'     example '20240422 03:00' or false\n    job = nil,  -- string or false, nil ...\n    setOwner = true,    -- Set vehicle Owner? if Temporary date set true\n    owner = 'char:12asd76asd5asdas',    -- player identifier\n    coords = vector4(1.0, 1.0, 1.0, 1.0), --vector4 or table with xyzw\n    -- Vehicle, you can set as many properties as you want\n    vehicle = {                             \n        model = 'sulta',                   -- required\n        plate = Vehicles.GeneratePlate(),  -- required\n        fuelLevel = 100,                   -- required\n        color1 = [0,0,0],\n        color2 = [0,0,0],                 \n    },\n}\n\nVehicles.CreateVehicle(CreateVehicleData, function(data, Vehicle)\n   print(json.encode(data, { indent = true} ))\n\n -- Set Metadata\n  Vehicle.SetMetadata('mono', { \n    smoke = 'seems to be very smoked', \n    hungry = 'the subject is very hungry'\n  }) \n  Wait(1000)\n  -- Get Metadata\n  local metadata = Vehicle.GetMetadata('mono',)\n  print(('%s, %s'):format(metadata.smoke, metadata.hungry))\n  Wait(1000)\n  -- delete espeific Metadata\n  Vehicle.DeleteMetadata('mono', 'smoke')\n  Wait(1000)\n  -- Get new metadata\n  local metadataNew = Vehicle.GetMetadata('mono')\n  print(('%s'):format(metadataNew.hungry))\n  Wait(1000)\n  -- delete all metadata from 'mono' return nil \n  Vehicle.DeleteMetadata('mono')\n  \n\n  --GarageActions\n  -- Store/Retry\n  Vehicle.StoreVehicle('Pillbox Hill')\n\n  Vehicle.RetryVehicle(CreateVehicleData.coords)\n\n  -- impound\n  Vehicle.ImpoundVehicle('Impound Car', 100, 'Vehicle impond', '2024/05/2 15:43')\n\n  Vehicle.RetryImpound('Pillbox Hill', CreateVehicleData.coords)\nend)\n\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Vehicles.GetClientProps()"})," ",(0,r.jsx)(n.em,{children:"Server"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Returns vehicle props"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"\nlocal vehicleProps = Vehicles.GetClientProps(SourceID, VehicleNetworkID)\n\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Vehicles.GetVehicle()"})," ",(0,r.jsx)(n.em,{children:"Server"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"local Vehicle = Vehicles.GetVehicle(entity) \nVehicle.SetMetadata(key, data)\nVehicle.DeleteMetadata(key, value) \nVehicle.GetMetadata(key)     \nVehicle.Savemetadata()\nVehicle.AddKey(source) \nVehicle.RemoveKey(source)\nVehicle.GetKeys()\nVehicle.SaveProps(props)\nVehicle.StoreVehicle(parking)\nVehicle.RetryVehicle(coords)\nVehicle.ImpoundVehicle(impound, price, note, date, endPound)\nVehicle.RetryImpound(ToGarage, coords)\nVehicle.SetFakePlate(plate)\nVehicle.SetFakePlate(boolean)\nVehicle.DeleteVehicle(fromDatabaseBoolean)\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"GetVehicleByPlate"})," ",(0,r.jsx)(n.em,{children:"Server"}),"\n= Vehicles.GetVehicle()"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:" local Vehicles.GetVehicleByPlate(plate)\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Vehicles.GetVehicleId"})," ",(0,r.jsx)(n.em,{children:"Server"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"local vehicle = Vehicles.GetVehicleId(id) \n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Delete All Vehicles"})," ",(0,r.jsx)(n.em,{children:"Server"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"local AllVechiles = Vehicles.GetAllVehicles(source, VehicleTable, haveKeys) \n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Vehicles.GetAllVehicles()"})," ",(0,r.jsx)(n.em,{children:"Server"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"soruce  = player source"}),"\n",(0,r.jsx)(n.li,{children:"VehicleTable = boolean | true get vehicles from table mVehicles false get vehicles from DB"}),"\n",(0,r.jsx)(n.li,{children:"haveKeys = boolean  | Have player keys ?"}),"\n",(0,r.jsx)(n.li,{children:"return all vehicles from source"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"local AllVechiles = Vehicles.GetAllVehicles(source, VehicleTable, haveKeys) \n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Set Vehicle Owner"})," ",(0,r.jsx)(n.em,{children:"Server"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"Vehicles.SetVehicleOwner({\n    job = ?,\n    owner = ?,\n    parking = ?,\n    plate = ?,\n    type = ?,\n    vehicle = ?,\n})\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"SetCarOwner"})," ",(0,r.jsx)(n.em,{children:"Server"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"Vehicles.SetCarOwner(src)\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Delete All Vehicles"})," ",(0,r.jsx)(n.em,{children:"Server"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"Vehicles.DelAllVehicles() \n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"save all vehicles"})," ",(0,r.jsx)(n.em,{children:"Server"}),"\ntrue/false to delete vehicles"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"Vehicles.SaveAllVehicles(delete)\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"plate exists?"})," ",(0,r.jsx)(n.em,{children:"Server"}),"\nreturn boolean"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"Vehicles.PlateExist(plate) \n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Generate plate"})," ",(0,r.jsx)(n.em,{children:"Server"}),"\nreturn plate string"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"Vehicles.GeneratePlate()\n"})})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453:(e,n,l)=>{l.d(n,{R:()=>t,x:()=>a});var r=l(6540);const s={},c=r.createContext(s);function t(e){const n=r.useContext(c);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),r.createElement(c.Provider,{value:n},e.children)}}}]);